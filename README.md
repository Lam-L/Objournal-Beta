# æ‰‹è®°è§†å›¾ (React)

> å°† Markdown æ–‡ä»¶æŒ‰æ—¥å†ç»„ç»‡ï¼Œç”Ÿæˆç±»ä¼¼æ‰‹è®°åº”ç”¨çš„è§†å›¾

[Obsidian](https://obsidian.md) æ’ä»¶ï¼Œä½¿ç”¨ React + TypeScript æ„å»ºï¼Œæä¾›æœˆå†è§†å›¾ã€åˆ—è¡¨è§†å›¾ã€é‚£å¹´ä»Šæ—¥ã€æ‰‹è®°å¼å›¾ç‰‡å¸ƒå±€ç­‰èƒ½åŠ›ã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### é¦–é¡µè§†å›¾

- **æœˆå†è§†å›¾**ï¼šæŒ‰æœˆä»½å±•ç¤ºæ‰‹è®°ï¼Œç‚¹å‡»æ—¥æœŸæŸ¥çœ‹å½“å¤©æ¡ç›®
- **åˆ—è¡¨è§†å›¾**ï¼šæ—¶é—´çº¿å¼åˆ—è¡¨ï¼ŒæŒ‰æ—¥æœŸåˆ†ç»„ï¼ˆä»Šå¤©ã€æ˜¨å¤©ã€å¾€å¹´ï¼‰
- **é‚£å¹´ä»Šæ—¥**ï¼šå±•ç¤ºå¾€å¹´åŒæœˆåŒæ—¥çš„æ‰€æœ‰æ‰‹è®°ï¼Œæ¨ªå‘å¡ç‰‡å¸ƒå±€
- **æ‰‹è®°å¡ç‰‡**ï¼šæ ‡é¢˜ã€æ—¥æœŸã€æ­£æ–‡æ‘˜è¦ã€å›¾ç‰‡ï¼ˆæ”¯æŒ 1~5+ å¼ å¤šç§å¸ƒå±€ï¼‰
- **ç»Ÿè®¡æ **ï¼ˆå¯é€‰ï¼‰ï¼šè¿ç»­çºªå½•å¤©æ•°ã€æ€»å­—æ•°ã€å†™æ‰‹è®°å¤©æ•°

### ç¼–è¾‘é¡µ

- **æ‰‹è®°å¼å›¾ç‰‡å¸ƒå±€**ï¼šé»˜è®¤æ–‡ä»¶å¤¹å†…çš„ç¬”è®°ï¼Œåœ¨ Live Preview æ¨¡å¼ä¸‹ï¼Œå›¾ç‰‡æŒ‰é¦–é¡µå¡ç‰‡æ ·å¼æ’åˆ—ï¼ˆ1/2/3/4/5+ å¼ å¤šç§å¸ƒå±€ï¼‰
- **è¶… 5 å¼ è‡ªåŠ¨æ‹†åˆ†**ï¼šåŒä¸€æ®µè¿ç»­å›¾ç‰‡è¶…è¿‡ 5 å¼ æ—¶ï¼Œè‡ªåŠ¨æ‹†æˆå¤šä¸ªç”»å»Šï¼Œä¿è¯æ¯å¼ å›¾éƒ½å¯è§
- **å®æ—¶æ›´æ–°**ï¼šæ·»åŠ /åˆ é™¤å›¾ç‰‡æ—¶è‡ªåŠ¨é‡æ–°æ¸²æŸ“
- **å›¾ç‰‡åˆ é™¤**ï¼šæ¯å¼ å›¾æ”¯æŒå³ä¸Šè§’åˆ é™¤æŒ‰é’®

### å…¶ä»–

- **å¤šè¯­è¨€**ï¼šç®€ä½“ä¸­æ–‡ã€English
- **è™šæ‹ŸåŒ–åˆ—è¡¨**ï¼šåŸºäº @tanstack/react-virtualï¼Œé•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–
- **æ–‡ä»¶ç³»ç»Ÿç›‘å¬**ï¼šæ–°å»ºã€ä¿®æ”¹ã€åˆ é™¤ã€é‡å‘½åæ—¶è‡ªåŠ¨åˆ·æ–°
- **å¯é…ç½®æ—¥æœŸå­—æ®µ**ï¼šæ”¯æŒ frontmatter ä¸­ `date`ã€`Date`ã€`created`ã€`created_time` ç­‰ï¼Œæˆ–è‡ªå®šä¹‰å­—æ®µ

---

## ğŸ“¦ å®‰è£…

### ä»ç¤¾åŒºæ’ä»¶å®‰è£…ï¼ˆè‹¥å·²å‘å¸ƒï¼‰

1. æ‰“å¼€ Obsidian â†’ è®¾ç½® â†’ ç¤¾åŒºæ’ä»¶ â†’ æµè§ˆ
2. æœç´¢ã€Œæ‰‹è®°è§†å›¾ã€å¹¶å®‰è£…

### æ‰‹åŠ¨å®‰è£…

1. ä¸‹è½½ `main.js`ã€`manifest.json`ã€`styles.css`
2. æ”¾å…¥ `{vault}/.obsidian/plugins/obsidian-journal-react/`
3. åœ¨ Obsidian ä¸­å¯ç”¨æ’ä»¶

### è‡ªè¡Œæ„å»º

```bash
cd .obsidian/plugins/obsidian-journal-react
npm install
npm run build
```

æ„å»ºäº§ç‰©ä¼šè¾“å‡ºåˆ°æ’ä»¶ç›®å½•ã€‚

---

## ğŸš€ ä½¿ç”¨

### æ‰“å¼€è§†å›¾

- **å‘½ä»¤**ï¼š`Ctrl/Cmd + P` â†’ è¾“å…¥ã€Œæ‰“å¼€æ‰‹è®°è§†å›¾ã€â†’ å›è½¦
- æˆ–é€šè¿‡å‘½ä»¤é¢æ¿æ‰§è¡Œã€Œæ‰“å¼€æ‰‹è®°è§†å›¾ã€

### æ–°å»ºç¬”è®°

- åœ¨è§†å›¾å³ä¸Šè§’ç‚¹å‡» **+** æŒ‰é’®
- ä½¿ç”¨é…ç½®çš„é»˜è®¤æ¨¡æ¿åˆ›å»ºå½“æ—¥ç¬”è®°

### åˆ‡æ¢è§†å›¾æ¨¡å¼

- ç‚¹å‡»æœˆå†/åˆ—è¡¨å›¾æ ‡ï¼Œåœ¨æœˆå†è§†å›¾ä¸åˆ—è¡¨è§†å›¾é—´åˆ‡æ¢

---

## âš™ï¸ è®¾ç½®

| è®¾ç½®é¡¹ | è¯´æ˜ |
|--------|------|
| **é»˜è®¤æ–‡ä»¶å¤¹** | æ‰‹è®°è§†å›¾é»˜è®¤æ‰“å¼€è¯¥æ–‡ä»¶å¤¹ï¼Œç¼–è¾‘é¡µå›¾ç‰‡å¸ƒå±€ä»…åœ¨æ­¤æ–‡ä»¶å¤¹å†…çš„ç¬”è®°ç”Ÿæ•ˆ |
| **æ—¥æœŸå­—æ®µ** | æŒ‡å®š frontmatter ä¸­çš„æ—¥æœŸå­—æ®µï¼Œå¦‚ `date`ã€`created`ï¼›è‹¥æ— åˆ™ä½¿ç”¨æ–‡ä»¶åˆ›å»ºæ—¶é—´ |
| **é»˜è®¤æ¨¡æ¿** | æ–°å»ºç¬”è®°æ—¶ä½¿ç”¨çš„æ¨¡æ¿ï¼Œæ”¯æŒ `{{date}}`ã€`{{year}}`ã€`{{month}}`ã€`{{day}}`ã€`{{title}}` |
| **ç¼–è¾‘é¡µæ‰‹è®°å¼å›¾ç‰‡å¸ƒå±€** | åœ¨ Live Preview ä¸­ï¼Œé»˜è®¤æ–‡ä»¶å¤¹å†…ç¬”è®°æ˜¯å¦å¯ç”¨å›¾ç‰‡å¸ƒå±€ |
| **å›¾ç‰‡é—´è·** | å›¾ç‰‡å®¹å™¨ä¹‹é—´çš„é—´è·ï¼ˆ0â€“30pxï¼‰ |
| **å›¾ç‰‡æ˜¾ç¤ºé™åˆ¶** | æ¯ä¸ªå¡ç‰‡æœ€å¤šæ˜¾ç¤ºçš„å›¾ç‰‡æ•°é‡ï¼ˆé»˜è®¤ 3ï¼Œé¦–é¡µå®é™…ä»¥ 5 å¼ å¸ƒå±€å±•ç¤ºï¼‰ |
| **æ‰“å¼€ç¬”è®°æ–¹å¼** | æ–°æ ‡ç­¾é¡µ / å½“å‰æ ‡ç­¾é¡µ |
| **æ˜¾ç¤ºç»Ÿè®¡æ ** | æ˜¯å¦åœ¨é¡¶éƒ¨å±•ç¤ºè¿ç»­å¤©æ•°ã€å­—æ•°ç­‰ç»Ÿè®¡ |

---

## ğŸ“ æ—¥æœŸæå–è§„åˆ™

1. **ä¼˜å…ˆçº§ 1**ï¼šä» frontmatter è¯»å–æ—¥æœŸï¼ˆæ”¯æŒè‡ªå®šä¹‰å­—æ®µæˆ–é»˜è®¤ `date`ã€`Date`ã€`created`ã€`created_time`ï¼‰
2. **ä¼˜å…ˆçº§ 2**ï¼šä½¿ç”¨æ–‡ä»¶åˆ›å»ºæ—¶é—´ `ctime`

---

## ğŸ–¼ï¸ å›¾ç‰‡å¸ƒå±€

### é¦–é¡µå¡ç‰‡

æ”¯æŒ 1~5+ å¼ å›¾ç‰‡çš„å¤šç§å¸ƒå±€ï¼š

- 1 å¼ ï¼šå•åˆ— 2:1
- 2 å¼ ï¼šå·¦å³å„ 2:1
- 3 å¼ ï¼šå·¦å¤§ + å³ 2 å°
- 4 å¼ ï¼šå·¦å¤§ + å³ 3 å°ï¼ˆå·¦ä¸Šã€å·¦ä¸‹å·¦ã€å·¦ä¸‹å³ï¼‰
- 5+ å¼ ï¼šå·¦å¤§ + å³ 4 å°ï¼Œè¶…å‡º 5 å¼ æ‹†æˆå¤šä¸ªç”»å»Š

### ç¼–è¾‘é¡µ

- ä¸é¦–é¡µå¸ƒå±€ä¸€è‡´
- è¶…è¿‡ 5 å¼ è¿ç»­å›¾ç‰‡è‡ªåŠ¨æ‹†æˆå¤šä¸ªç”»å»Š
- æ¯å¼ å›¾æ”¯æŒå³ä¸Šè§’åˆ é™¤

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
obsidian-journal-react/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.ts                 # æ’ä»¶å…¥å£
â”‚   â”œâ”€â”€ settings.ts             # è®¾ç½®ç±»å‹ä¸é»˜è®¤å€¼
â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â””â”€â”€ JournalSettingTab.ts
â”‚   â”œâ”€â”€ view/
â”‚   â”‚   â””â”€â”€ JournalView.tsx     # Obsidian è§†å›¾å®¹å™¨
â”‚   â”œâ”€â”€ components/             # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ JournalViewContainer.tsx
â”‚   â”‚   â”œâ”€â”€ JournalHeader.tsx
â”‚   â”‚   â”œâ”€â”€ JournalStats.tsx
â”‚   â”‚   â”œâ”€â”€ JournalList.tsx
â”‚   â”‚   â”œâ”€â”€ JournalCard.tsx
â”‚   â”‚   â”œâ”€â”€ JournalImageContainer.tsx
â”‚   â”‚   â”œâ”€â”€ JournalCalendar.tsx
â”‚   â”‚   â”œâ”€â”€ CalendarHeader.tsx
â”‚   â”‚   â”œâ”€â”€ CalendarDayCell.tsx
â”‚   â”‚   â”œâ”€â”€ OnThisDaySection.tsx
â”‚   â”‚   â”œâ”€â”€ OnThisDayTile.tsx
â”‚   â”‚   â”œâ”€â”€ JournalEmptyState.tsx
â”‚   â”‚   â””â”€â”€ JournalCardMenu.tsx
â”‚   â”œâ”€â”€ context/                # React Context
â”‚   â”‚   â”œâ”€â”€ JournalViewContext.tsx
â”‚   â”‚   â”œâ”€â”€ JournalDataContext.tsx
â”‚   â”‚   â””â”€â”€ JournalViewModeContext.tsx
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useJournalEntries.ts
â”‚   â”‚   â”œâ”€â”€ useJournalPagination.ts
â”‚   â”‚   â”œâ”€â”€ useJournalScroll.ts
â”‚   â”‚   â”œâ”€â”€ useFileSystemWatchers.ts
â”‚   â”‚   â”œâ”€â”€ useCalendarMonth.ts
â”‚   â”‚   â””â”€â”€ useScrollbarWidth.ts
â”‚   â”œâ”€â”€ editor/
â”‚   â”‚   â””â”€â”€ EditorImageLayout.ts  # Live Preview å›¾ç‰‡å¸ƒå±€
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ utils.ts
â”‚   â”‚   â”œâ”€â”€ onThisDay.ts
â”‚   â”‚   â”œâ”€â”€ calendarUtils.ts
â”‚   â”‚   â””â”€â”€ StatisticsCalculator.ts
â”‚   â”œâ”€â”€ i18n/
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ locales/
â”‚   â”‚       â”œâ”€â”€ zh_cn.ts
â”‚   â”‚       â””â”€â”€ en.ts
â”‚   â””â”€â”€ constants.ts
â”œâ”€â”€ styles.css
â”œâ”€â”€ manifest.json
â”œâ”€â”€ package.json
â””â”€â”€ esbuild.config.mjs
```

---

## ğŸ› ï¸ å¼€å‘

### å‘½ä»¤

```bash
# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼ï¼ˆç›‘å¬æ–‡ä»¶å˜åŒ–å¹¶æ„å»ºï¼‰
npm run dev

# ç”Ÿäº§æ„å»º
npm run build
```

### æŠ€æœ¯æ ˆ

- **React 18**ï¼šUI æ¡†æ¶
- **@tanstack/react-virtual**ï¼šè™šæ‹ŸåŒ–åˆ—è¡¨
- **TypeScript**ï¼šç±»å‹å®‰å…¨
- **esbuild**ï¼šæ„å»º

### æ„å»ºäº§ç‰©

- `main.js`ï¼šæ’ä»¶ä¸»å…¥å£
- `manifest.json`ï¼šæ’ä»¶å…ƒä¿¡æ¯
- `styles.css`ï¼šæ ·å¼

---

## ğŸ“„ è®¸å¯è¯

MIT
